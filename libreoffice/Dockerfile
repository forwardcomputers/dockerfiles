#
#APPNEW apt
#DESKTOP_COUNT 7
#1DESKTOP_NAME LibreOffice
#1DESKTOP_COMMENT The office productivity suite compatible to the open and standardized ODF document format. Supported by The Document Foundation.
#1DESKTOP_CATEGORIES Office;X-Red-Hat-Base;X-SuSE-Core-Office;X-MandrivaLinux-Office-Other;
#1DESKTOP_MIMETYPE application/vnd.openofficeorg.extension;x-scheme-handler/vnd.libreoffice.cmis;
#1DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/startcenter.svg
#1DESKTOP_EXEC libreoffice
#2DESKTOP_NAME LibreOffice Base
#2DESKTOP_COMMENT Manage databases, create queries and reports to track and manage your information by using Base.
#2DESKTOP_CATEGORIES Office;Database;X-Red-Hat-Base;X-MandrivaLinux-MoreApplications-Databases;
#2DESKTOP_MIMETYPE application/vnd.oasis.opendocument.database;application/vnd.sun.xml.base;
#2DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/base.svg
#2DESKTOP_EXEC libreoffice --base
#3DESKTOP_NAME LibreOffice Calc
#3DESKTOP_COMMENT Perform calculations, analyze information and manage lists in spreadsheets by using Calc.
#3DESKTOP_CATEGORIES Office;Spreadsheet;X-Red-Hat-Base;X-MandrivaLinux-Office-Spreadsheets;
#3DESKTOP_MIMETYPE application/vnd.oasis.opendocument.spreadsheet;application/vnd.oasis.opendocument.spreadsheet-template;application/vnd.sun.xml.calc;application/vnd.sun.xml.calc.template;application/msexcel;application/vnd.ms-excel;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;application/vnd.ms-excel.sheet.macroEnabled.12;application/vnd.openxmlformats-officedocument.spreadsheetml.template;application/vnd.ms-excel.template.macroEnabled.12;application/vnd.ms-excel.sheet.binary.macroEnabled.12;text/csv;application/x-dbf;text/spreadsheet;application/csv;application/excel;application/tab-separated-values;application/vnd.lotus-1-2-3;application/vnd.oasis.opendocument.chart;application/vnd.oasis.opendocument.chart-template;application/x-dbase;application/x-dos_ms_excel;application/x-excel;application/x-msexcel;application/x-ms-excel;application/x-quattropro;application/x-123;text/comma-separated-values;text/tab-separated-values;text/x-comma-separated-values;text/x-csv;application/vnd.oasis.opendocument.spreadsheet-flat-xml;application/vnd.ms-works;application/clarisworks;application/x-iwork-numbers-sffnumbers;application/x-starcalc;
#3DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/calc.svg
#3DESKTOP_EXEC libreoffice --calc
#4DESKTOP_NAME LibreOffice Draw
#4DESKTOP_COMMENT Create and edit drawings, flow charts and logos by using Draw.
#4DESKTOP_CATEGORIES Office;FlowChart;Graphics;2DGraphics;VectorGraphics;X-Red-Hat-Base;X-MandrivaLinux-Office-Drawing;
#4DESKTOP_MIMETYPE application/vnd.oasis.opendocument.graphics;application/vnd.oasis.opendocument.graphics-flat-xml;application/vnd.oasis.opendocument.graphics-template;application/vnd.sun.xml.draw;application/vnd.sun.xml.draw.template;application/vnd.visio;application/x-wpg;application/vnd.corel-draw;application/vnd.ms-publisher;image/x-freehand;application/clarisworks;application/x-pagemaker;application/pdf;application/x-stardraw;image/x-emf;image/x-wmf;
#4DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/draw.svg
#4DESKTOP_EXEC libreoffice --draw
#5DESKTOP_NAME LibreOffice Impress
#5DESKTOP_COMMENT Create and edit presentations for slideshows, meeting and Web pages by using Impress.
#5DESKTOP_CATEGORIES Office;Presentation;X-Red-Hat-Base;X-MandrivaLinux-Office-Presentations;
#5DESKTOP_MIMETYPE application/vnd.oasis.opendocument.presentation;application/vnd.oasis.opendocument.presentation-template;application/vnd.sun.xml.impress;application/vnd.sun.xml.impress.template;application/mspowerpoint;application/vnd.ms-powerpoint;application/vnd.openxmlformats-officedocument.presentationml.presentation;application/vnd.ms-powerpoint.presentation.macroEnabled.12;application/vnd.openxmlformats-officedocument.presentationml.template;application/vnd.ms-powerpoint.template.macroEnabled.12;application/vnd.openxmlformats-officedocument.presentationml.slide;application/vnd.openxmlformats-officedocument.presentationml.slideshow;application/vnd.ms-powerpoint.slideshow.macroEnabled.12;application/vnd.oasis.opendocument.presentation-flat-xml;application/x-iwork-keynote-sffkey;
#5DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/impress.svg
#5DESKTOP_EXEC libreoffice --impress
#6DESKTOP_NAME LibreOffice Math
#6DESKTOP_COMMENT Create and edit scientific formulas and equations by using Math.
#6DESKTOP_CATEGORIES Office;Spreadsheet;Education;Science;Math;X-Red-Hat-Base;X-MandrivaLinux-Office-Other;
#6DESKTOP_MIMETYPE application/vnd.oasis.opendocument.formula;application/vnd.sun.xml.math;application/vnd.oasis.opendocument.formula-template;text/mathml;application/mathml+xml;
#6DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/math.svg
#6DESKTOP_EXEC libreoffice --math
#7DESKTOP_NAME LibreOffice Writer
#7DESKTOP_COMMENT Create and edit text and graphics in letters, reports, documents and Web pages by using Writer.
#7DESKTOP_CATEGORIES Office;WordProcessor;X-Red-Hat-Base;X-MandrivaLinux-Office-Wordprocessors;
#7DESKTOP_MIMETYPE application/vnd.oasis.opendocument.text;application/vnd.oasis.opendocument.text-template;application/vnd.oasis.opendocument.text-web;application/vnd.oasis.opendocument.text-master;application/vnd.oasis.opendocument.text-master-template;application/vnd.sun.xml.writer;application/vnd.sun.xml.writer.template;application/vnd.sun.xml.writer.global;application/msword;application/vnd.ms-word;application/x-doc;application/x-hwp;application/rtf;text/rtf;application/vnd.wordperfect;application/wordperfect;application/vnd.lotus-wordpro;application/vnd.openxmlformats-officedocument.wordprocessingml.document;application/vnd.ms-word.document.macroEnabled.12;application/vnd.openxmlformats-officedocument.wordprocessingml.template;application/vnd.ms-word.template.macroEnabled.12;application/vnd.ms-works;application/vnd.stardivision.writer-global;application/x-extension-txt;application/x-t602;text/plain;application/vnd.oasis.opendocument.text-flat-xml;application/x-fictionbook+xml;application/macwriteii;application/x-aportisdoc;application/prs.plucker;application/vnd.palm;application/clarisworks;application/x-sony-bbeb;application/x-abiword;application/x-iwork-pages-sffpages;application/x-mswrite;application/x-starwriter;
#7DESKTOP_LOGO https://github.com/LibreOffice/core/raw/master/sysui/desktop/icons/hicolor/scalable/apps/writer.svg
#7DESKTOP_EXEC libreoffice --writer
#
FROM ubuntu:rolling
ARG REPO
ARG VERSION
ARG TEXT
#
LABEL maintainer="Ali Mustakim <alim@forwardcomputers.com>" \
      org.label-schema.name="${REPO}" \
      org.label-schema.url="https://hub.docker.com/r/forwardcomputers/${REPO}" \
      BuildDate="${TEXT}"
#
ENV user="duser" \
    uid="1001" \
    gid="1001" \
    LANG="C.UTF-8"
#
RUN set -e \
&&  export user="${user}" uid="${uid}" gid="${gid}" LANG="${LANG}" \
#
# Update Ubuntu repos and install dependencies
#
&&  apt-get -qq update && DEBIAN_FRONTEND=noninteractive apt-get -qq install --no-install-recommends --yes \
    libpulse0 \
    locales \
    libreoffice \
    default-jre \
    firefox \
    fonts-crosextra-caladea \
    fonts-crosextra-carlito \
    fonts-dejavu \
    fonts-liberation \
    fonts-liberation2 \
    fonts-linuxlibertine \
    fonts-noto-core \
    fonts-noto-mono \
    fonts-noto-ui-core \
    fonts-sil-gentium-basic \
    ghostscript \
    gstreamer1.0-plugins-base \
    gstreamer1.0-plugins-good \
    gstreamer1.0-plugins-ugly \
    gstreamer1.0-plugins-bad \
    gstreamer1.0-libav \
    hunspell-en-ca \
    hunspell-en-us \
    hyphen-en-us \
    graphicsmagick-imagemagick-compat \
    libgl1 \
    libreoffice-help-en-us \
    libreoffice-java-common \
    libreoffice-lightproof-en \
    libxrender1 \
    mythes-en-us \
    openclipart-libreoffice \
    pstoedit \
    xdg-utils \
#
# Clean-up
#
&&  rm --recursive --force \
    /usr/share/doc/* \
    /usr/share/man/* \
    /var/cache/apt/archives/*.deb \
    /var/cache/apt/archives/partial/*.deb \
    /var/cache/apt/*.bin \
    /var/cache/debconf/*.old \
    /var/lib/apt/lists/* \
    /var/lib/dpkg/info/* \
    /var/log/apt \
    /var/log/*.log \
#
# Create unprivileged user
#
&&	locale-gen en_US.UTF-8 || true \
&&  groupadd --gid "${gid}" "${user}" \
&&  useradd --create-home --shell /bin/bash --uid "${uid}" --gid "${gid}" --groups audio,video --comment "${user}" "${user}" \
&&  if [ -d "/etc/sudoers.d" ]; then echo "${user} ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/duser; fi
#
USER "${user}"
WORKDIR /home/"${user}"
ENTRYPOINT [ "libreoffice" ]
